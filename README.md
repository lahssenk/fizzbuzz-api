# INTRO

This project contains a golang HTTP Server for a FizzBuzz API.

See [requirements](REQUIREMENTS.md) for a detailed specification of the API.

# CODE

The project contains:

- the binary [cmd/api/main.go](/cmd/api/main.go)
- the fizzbuzz service [service/fizzbuzz](/service/fizzbuzz/) with tests
- the proto definition of the API [proto/fizzbuzz/v1](/proto/fizzbuzz/v1/)
- the auto generated go code from proto [protogen/](/protogen/)
- the auto generated open api v3 yaml [openapi_v3](/openapi_v3/)
- a dummy authentication middleware checking for an api key in Authorization header [/middlewares](/middlewares/authn/)

# TRY WITH CURL

```
curl --request GET \
  --url 'http://localhost:8080/v1/fizzbuzz?string1=fizz&string2=buzz&int1=3&int2=5&limit=100' \
  --header 'Authorization: testkey'
```

# RUN

The server reads a tiny configuration from environment variables:
- SERVER_HOST
- SERVER_PORT
- ADMIN_PORT

and some optional ones:
- READ_TIMEOUT
- READ_HEADER_TIMEOUT
- WRITE_TIMEOUT
- IDLE_TIMEOUT
- MAX_HEADER_BYTES
- API_KEY

## Go
```make gorun```

## Docker
```make ci```

# DESIGN

The API is developped from a protobuf [contract](/proto/fizzbuzz/v1/service.proto),
the service definition and request/response struct types are autogenerated using
protoc and stored [here](/protogen/fizzbuzz/v1/).

I don't really like writing OpenAPI yaml spec by hand, therefor it is auto-generated from
the proto definition and annotations, and stored [here](/openapi_v3/openapi.yaml).